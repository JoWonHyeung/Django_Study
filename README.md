# Django

## 2022/02/16

- ### **View**
 
웹 클라이언트(브라우저)에서 요청이 전달되면 알맞는 서비스 로직을 수행하고, 그 결과를 직접 응답하거나 템플릿을 통해서 응답한다. 파이썬 함수 또는 클래스로 구현하는데 함수로 구현한다.

선택적으로 다음 기능들을 구현하게 된다.

1. Query 문자열 추출

요청 방식에 따라서 2가지 방법이 있다.

Get 방식 요청: request.GET

Post 방식 요청: request.Post

2. 요청 방식을 방식을 체크: request.method 
3. 서비스 로직, 처리 로직을 구현한다.
4. 템플릿을 통해서 응답 페이지 구성되도록 처리한다.
5. 응답 페이지를 구성하게 될 템플릿(HTML)에게 전달할 데이터가 존재하면 dict 객체에 담아서 반환한다.

cf) request.GET['name'] => key값 없으면 오류난다. / request.GET.get(key, default value) => 없으면 none을 return 한다.


- ### **Template**

HTML, CSS, Javascript로 작성한다. 장고에서 제공하는 구문을 이용해서 동적인 처리를 구현할 수 있다.

동적 처리가 수행되는 위치에 따라서

Server : 장고의 템플릿 변수, 장고의 템플릿 태크

Client : javascript 사용


- ### **Http 요청 방식(method)**
  - 기본 요청 방식: GET
  - 브라우저에서 URL 문자열을 입력해서 요청: GET
  - GET 방식으로 요청할 때는 Query 문자열 없이 요청할 수도 있고, Query 문자열을 전달하면서 요청할 수도 있다. <form> 태그를 사용해서 요청하는 것도 가능하다. <a> 태그로도 요청할 수 있다.
  - Query 문자열을 전달하면서 GET 방식으로 요청할 때의 제한사항을 보안하기 위해서 POST 요청 방식이 추가되었다.
  - Post요청 방식 Query 문자열을 전달하면서 요청하는 것만 지원한다.
  - <form> 태그를 사용해서 요청하는 것만 가능하다.

 - ### **CSRF** : Cross-site request forgery(사이트간의 요청 위조)
Get 방식은 보안이 필요하지 않은 경우에 사용하지만 Post 는 보안이 필요한 요청에 사용하기 때문에 외부로 부터의 공격을 차단하기 위해 서버에 요청을 하는 클라이언트가
서버에서 보낸 웹페이지로 부터의 요청인지 확인하기 위해서 Csrf token 이라는 것을 사용한다. 즉 장고에서는 csrf를 방지하기 위해서 post 요청시에는 csrf token을 사용해야만
요청할 수 있게 하고 있다. 이때 사용하는 태그가 {% csrf_token %}이다.
ex) 캡차
 
